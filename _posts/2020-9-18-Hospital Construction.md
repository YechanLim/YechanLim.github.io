---
title: "Hospital Construction"
date: 2020-9-18
categories: [Algorithm]
---

1. 문제분석

주어진 1차원 좌표 내 빌딩과 빌딩 내 사람수를 바탕으로 병원을 세울 때 병원에  접근할 수 있는 최대 사람수를 구하기. 

(단, 병원에서 접근 가능 거리 1<=K<=2,000,000. 1<=빌딩수(n)<=10,000,000. 1<=사람 수(g)<10,000)


2. 문제풀이

1차원 좌표 내 X값이 가장 작은 빌딩을 시작으로 각 빌딩이 포함되었을 때 병원에 접근할 수 있는 최대 사람 수를 구한다.  

A가 포함된 최대 사람수를 구하면 B에서는 A를 제외한 최대값을 구하면 되므로 B 보다 x좌표가 크고 x+2k 이하인  좌표만 확인하면 최대값을 구할 수 있다.

(이때, A: x좌표가 최소 값, B: A보다 큰 것 중 가장 작은 값) 

X좌표 내의 임의의 연속된 두 좌표를 C,D라고 할 때 C가 포함된 최대값을 구하면 D는 D보다 x좌표가 큰 값들만 확인하면 최대값을 구할 수 있다. 

A가 포함된 최대값을 구하면 임의의 빌딩 E보다 x값이 크고 x+2k보다 작은  빌딩만 확인해도 최대값을 구할 수 있다.


이때, A가 포함된 병원 수용 인원수 최대값을 max_A 라고 한다면  B에서는 max_A - g(A)를 하고 난 후 A범위 밖 다음 x좌표부터 계산하여 최대값을 구한다. 
예를들어  좌표평면 내 x좌표가 01234567이고 k=2 일 때, x좌표 0을 포함한 병원에 접근할 수 있는 최대 인원수는 g(0)+g(1)+g(2)+g(3)+g(4) 이고 x좌표가 1일 때는 g(1)+g(2)+g(3)+g(4)+g(5) 를 구해야 하므로 g(1)+g(2)+g(3)+g(4)는 x=0에서 받아오고 x=1에선 g(5)만 계산한다. . 



3. 문제풀이 분석

X좌표 내 빌딩 및 사람 수 저장하고 sorting - O(NlgN)

빌딩의 x좌표보다 크고 x+2k보다 작은 빌딩 내 사람 수 더하기. - O(K)

→  b 를 N번 반복.- O(N*K)

Time complexity :

O(N*K) 	(b 과정을 최대 N번 반복하므로.)

Space complexity : 

O(N)	(n개의 x좌표를 만들어야 하므로)

4. 응용(discussion)

X좌표 값과 사람수를 저장하기 위해 2차원 배열을 동적으로 할당하였다. 처음 할당은 malloc을 2번 이용하여 list[n][2]의 형태로 저장하였으나 n값이 커지자  run-error가 발생하였다. 하지만, list 2개를 만들어(list[2]) 각각에 n개만큼의 개수를 할당하여 list를 만들자 제대로 동작하였다. 

첫 번째의 경우, list[n] 을 만들기 위해 n개의 연속된 주소가 할당되고 list[n][2]를 만들기 위해 동적으로 메모리를 할당하면 n개만큼의 연속적이지 않은 시작 주소가 할당되어야 하는데 두 번째의 경우 n개만큼의 연속적인 주소가 2개 존재하므로 시작 주소는 2개만 할당되면 된다. 이를 통해, 같은 메모리 공간을 사용하더라도 너무 많은 시작 주소를 할당하면 run-error가 발생할 수 있다는 것을 알게 되었다.  


5. 소스 코드 
<script src="https://gist.github.com/YechanLim/c76bb3d4ec0688eefb3355d146f4a399.js"></script>
